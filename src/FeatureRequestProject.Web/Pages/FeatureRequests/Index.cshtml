@page
@using FeatureRequestProject.FeatureRequests
@using FeatureRequestProject.Localization
@using FeatureRequestProject.Web.Pages.FeatureRequests
@using Microsoft.Extensions.Localization
@using Microsoft.AspNetCore.Authorization
@using FeatureRequestProject.Permissions
@using System.Text.Json
@using Volo.Abp.Users
@model IndexModel
@inject IStringLocalizer<FeatureRequestProjectResource> L
@inject IAuthorizationService AuthorizationService
@inject ICurrentUser CurrentUser

@section styles {
	<abp-style src="/Pages/FeatureRequests/Index.css" />
}

@section scripts {
	<script>
		var categoryListFromServer = @Html.Raw(
					JsonSerializer.Serialize(
							Html.GetEnumSelectList<Category>().Select(c => new { id = c.Value, name = c.Text })
					)
			);

	var statusListFromServer = @Html.Raw(JsonSerializer.Serialize(Model.StatusList));
</script>

	<abp-script src="/Pages/FeatureRequests/FeatureRequestCommon.js" />

	<abp-script src="/Pages/FeatureRequests/Index.js" />
}

<abp-card>
	<abp-card-header>
		<abp-row>
			<abp-column size-md="_6">
				<abp-card-title>@L["FeatureRequests"]</abp-card-title>
			</abp-column>
			<abp-column size-md="_6" class="text-end">
				@if (CurrentUser.IsAuthenticated)
				{
					<abp-button id="NewFeatureRequestButton"
								text="@L["NewFeatureRequest"].Value"
								icon="plus"
								button-type="Primary" />
				}
			</abp-column>
		</abp-row>
	</abp-card-header>
	<abp-card-body>
		<abp-table striped-rows="true" id="FeatureRequestsTable"></abp-table>
	</abp-card-body>
</abp-card>
